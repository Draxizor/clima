<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Pr√©dio Mix - Not√≠cias</title>
  <link href="https://fonts.googleapis.com/css?family=Roboto:400,700&display=swap" rel="stylesheet"/>
  <style>
    body {
      font-family: 'Roboto', sans-serif;
      background-color: #f2f2f2;
      margin: 0;
      padding: 0;
    }

    .secao {
      background-color: white;
      border-radius: 12px;
      margin: 20px;
      padding: 20px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }

    h2 {
      font-size: 1.5rem;
      margin-bottom: 10px;
      color: #222;
      border-left: 6px solid #007bff;
      padding-left: 10px;
    }

    .noticia {
      margin-bottom: 15px;
    }

    .noticia img {
      width: 100%;
      border-radius: 10px;
      max-height: 300px;
      object-fit: cover;
    }

    .noticia h3 {
      margin: 10px 0 5px;
      font-size: 1.2rem;
    }

    .noticia p {
      font-size: 1rem;
      color: #555;
    }

    iframe {
      display: none;
    }
  </style>
</head>
<body>

  <div class="secao" id="local">
    <h2>üèòÔ∏è Campinas e Regi√£o</h2>
  </div>

  <div class="secao" id="economia">
    <h2>üíº Economia</h2>
  </div>

  <div class="secao" id="tecnologia">
    <h2>üíª Tecnologia</h2>
  </div>

  <!-- RSS Feed Readers (ocultos) -->
  <iframe id="rss-local" src="https://feed2json.org/convert?url=https://g1.globo.com/sp/campinas-regiao/rss/g1/&t=1751971456"></iframe>
  <iframe id="rss-economia" src="https://feed2json.org/convert?url=https://g1.globo.com/economia/rss/g1/&t=1751971456"></iframe>
  <iframe id="rss-tecnologia" src="https://feed2json.org/convert?url=https://g1.globo.com/economia/tecnologia/rss/g1/&t=1751971456"></iframe>

  <script>
    const MAX_CARACTERES = 300;

    async function carregarRSS(idSecao, feedUrl) {
      try {
        const resposta = await fetch(feedUrl);
        const data = await resposta.json();
        const container = document.getElementById(idSecao);

        const noticias = data.items.slice(0, 3); // 3 not√≠cias por se√ß√£o

        noticias.forEach(item => {
          const div = document.createElement('div');
          div.className = 'noticia';

          const img = item.enclosure?.url || '';
          const titulo = item.title;
          let descricao = item.description || '';
          descricao = descricao.replace(/<[^>]+>/g, ''); // remover HTML
          if (descricao.length > MAX_CARACTERES) {
            const proxPonto = descricao.indexOf('.', MAX_CARACTERES);
            descricao = descricao.slice(0, proxPonto + 1 || MAX_CARACTERES) + ' [...]';
          }

          div.innerHTML = `
            ${img ? `<img src="${img}" alt="">` : ''}
            <h3>${titulo}</h3>
            <p>${descricao}</p>
          `;

          container.appendChild(div);
        });

      } catch (e) {
        console.error(`Erro ao carregar ${idSecao}:`, e);
      }
    }

    function atualizarNoticias() {
      carregarRSS('local', 'https://api.rss2json.com/v1/api.json?rss_url=https://g1.globo.com/sp/campinas-regiao/rss/g1/');
      carregarRSS('economia', 'https://api.rss2json.com/v1/api.json?rss_url=https://g1.globo.com/economia/rss/g1/');
      carregarRSS('tecnologia', 'https://api.rss2json.com/v1/api.json?rss_url=https://g1.globo.com/economia/tecnologia/rss/g1/');
    }

    atualizarNoticias();
    setInterval(atualizarNoticias, 10 * 60 * 1000); // Atualiza a cada 10 min
  </script>
</body>
</html>
